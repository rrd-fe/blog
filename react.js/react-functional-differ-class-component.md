# [è¯‘]Reactå‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶çš„å·®å¼‚



**åŸæ–‡**ï¼š <https://overreacted.io/how-are-function-components-different-from-classes/> 



åœ¨ `React.js` å¼€å‘ä¸­ï¼Œ*å‡½æ•°ç»„ä»¶*(function component) å’Œ *ç±»ç»„ä»¶(class component)* æœ‰ä»€ä¹ˆå·®å¼‚å‘¢ï¼Ÿ

åœ¨ä»¥å‰ï¼Œé€šå¸¸è®¤ä¸ºåŒºåˆ«æ˜¯ï¼Œç±»ç»„ä»¶æä¾›äº†æ›´å¤šçš„ç‰¹æ€§(æ¯”å¦‚`state`)ã€‚éšç€ [React Hooks](https://reactjs.org/docs/hooks-intro.html) çš„åˆ°æ¥ï¼Œè¿™ä¸ªè¯´æ³•ä¹Ÿä¸æˆç«‹äº†(é€šè¿‡hooksï¼Œå‡½æ•°ç»„ä»¶ä¹Ÿå¯ä»¥æœ‰`state`å’Œç±»ç”Ÿå‘½å‘¨æœŸå›è°ƒäº†)ã€‚

æˆ–è®¸ä½ ä¹Ÿå¬è¯´è¿‡ï¼Œè¿™ä¸¤ç±»ç»„ä»¶ä¸­ï¼Œæœ‰ä¸€ç±»çš„æ€§èƒ½æ›´å¥½ã€‚å“ªä¸€ç±»å‘¢ï¼Ÿå¾ˆå¤šè¿™æ–¹é¢çš„æ€§èƒ½æµ‹è¯•ï¼Œéƒ½æ˜¯ [æœ‰ç¼ºé™·çš„](https://medium.com/@dan_abramov/this-benchmark-is-indeed-flawed-c3d6b5b6f97f) ï¼Œå› æ­¤è¦ä»è¿™äº›æµ‹è¯•ä¸­ [å¾—å‡ºç»“è®º](https://github.com/ryardley/hooks-perf-issues/pull/2) ï¼Œä¸å¾—ä¸è°¨æ…ä¸€ç‚¹ã€‚æ€§èƒ½ä¸»è¦å–å†³äºä½ ä»£ç è¦å®ç°çš„åŠŸèƒ½(ä»¥åŠä½ çš„å…·ä½“å®ç°é€»è¾‘)ï¼Œå’Œä½¿ç”¨å‡½æ•°ç»„ä»¶è¿˜æ˜¯ç±»ç»„ä»¶ï¼Œæ²¡ä»€ä¹ˆå…³ç³»ã€‚æˆ‘ä»¬è§‚å¯Ÿå‘ç°ï¼Œå°½ç®¡å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶çš„æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ [æœ‰äº›ä¸åŒ](https://reactjs.org/docs/hooks-faq.html#are-hooks-slow-because-of-creating-functions-in-render) ï¼Œä½†æ˜¯ä»–ä»¬æ€§èƒ½ä¸Šçš„å·®å¼‚æ˜¯å¾ˆå¾®å°çš„ã€‚

ä¸ç®¡æ˜¯ä¸Šè¿°å“ªä¸ªåŸå› ï¼Œæˆ‘ä»¬éƒ½ [ä¸å»ºè®®](https://reactjs.org/docs/hooks-faq.html#should-i-use-hooks-classes-or-a-mix-of-both) ä½ ä½¿ç”¨å‡½æ•°ç»„ä»¶é‡å†™å·²æœ‰çš„ç±»ç»„ä»¶ï¼Œé™¤éä½ æœ‰åˆ«çš„åŸå› ï¼Œæˆ–è€…ä½ å–œæ¬¢å½“ç¬¬ä¸€ä¸ªåƒèƒèŸ¹çš„äººã€‚`React Hooks` è¿˜å¾ˆæ–°(å°±åƒ2014å¹´çš„Reactä¸€æ ·)ï¼Œç›®å‰è¿˜æ²¡æœ‰ä½¿ç”¨hooksç›¸å…³çš„æœ€ä½³å®è·µã€‚

é™¤äº†ä¸Šé¢è¿™äº›ï¼Œè¿˜æœ‰ä»€ä¹ˆåˆ«çš„å·®å¼‚ä¹ˆï¼Ÿåœ¨å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶ä¹‹é—´ï¼ŒçœŸçš„å­˜åœ¨æ ¹æœ¬æ€§çš„ä¸åŒä¹ˆï¼Ÿ*"Of course, there are â€” in the mental model"* (è¿™ä¸ªå®åœ¨ä¸çŸ¥é“å’‹è¡¨è¾¾ï¼Œè´´ä¸‹ä½œè€…åŸæ–‡å§ğŸ˜…) **åœ¨è¿™ç¯‡æ–‡ç« é‡Œï¼Œæˆ‘ä»¬å°†ä¸€èµ·çœ‹ä¸‹ï¼Œè¿™ä¸¤ç±»ç»„ä»¶æœ€å¤§çš„ä¸åŒ**ã€‚è¿™ä¸ªä¸åŒç‚¹ï¼Œåœ¨2015å¹´å‡½æ•°ç»„ä»¶å‡½æ•°ç»„ä»¶ [è¢«å¼•å…¥React](https://reactjs.org/blog/2015/09/10/react-v0.14-rc1.html#stateless-function-components) æ—¶å°±å­˜åœ¨äº†ï¼Œä½†æ˜¯è¢«å¤§å¤šæ•°äººå¿½ç•¥äº†ã€‚



## å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶çš„å·®å¼‚



**å‡½æ•°ç»„ä»¶ä¼šæ•è·renderå†…éƒ¨çš„çŠ¶æ€** 

è®©æˆ‘ä»¬ä¸€æ­¥æ­¥æ¥çœ‹ä¸‹ï¼Œè¿™ä»£è¡¨ä»€ä¹ˆæ„æ€ã€‚

**æ³¨æ„ï¼Œæœ¬æ–‡å¹¶ä¸æ˜¯å¯¹å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶è¿›è¡Œä»·å€¼åˆ¤æ–­ã€‚æˆ‘åªæ˜¯å±•ç¤ºä¸‹Reactç”Ÿæ€é‡Œï¼Œè¿™ä¸¤ç§ç»„ä»¶ç¼–ç¨‹æ¨¡å‹çš„ä¸åŒç‚¹ã€‚è¦å­¦ä¹ å¦‚ä½•æ›´å¥½çš„é‡‡ç”¨å‡½æ•°ç»„ä»¶ï¼Œæ¨èå®˜æ–¹æ–‡æ¡£ [Hooks FAQ](https://reactjs.org/docs/hooks-faq.html#adoption-strategy) ** ã€‚



å‡è®¾æˆ‘ä»¬æœ‰å¦‚ä¸‹çš„å‡½æ•°ç»„ä»¶ï¼š

```javascript
function ProfilePage(props) {
  const showMessage = () => {
    alert('Followed ' + props.user);
  };

  const handleClick = () => {
    setTimeout(showMessage, 3000);
  };

  return (
    <button onClick={handleClick}>Follow</button>
  );
}
```

ç»„ä»¶ä¼šæ¸²æŸ“ä¸€ä¸ªæŒ‰é’®ï¼Œå½“ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ï¼Œæ¨¡æ‹Ÿäº†ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚ï¼Œå¹¶ä¸”åœ¨è¯·æ±‚çš„å›è°ƒå‡½æ•°é‡Œï¼Œæ˜¾ç¤ºä¸€ä¸ªå¼¹çª—ã€‚æ¯”å¦‚ï¼Œå¦‚æœ `props.user` çš„å€¼æ˜¯ `Dan`ï¼Œç‚¹å‡»æŒ‰é’®3ç§’ä¹‹åï¼Œæˆ‘ä»¬å°†çœ‹åˆ° `Followed Dan` è¿™ä¸ªæç¤ºå¼¹çª—ã€‚éå¸¸ç®€å•ã€‚

(æ³¨æ„ï¼Œä¸Šé¢ä»£ç é‡Œï¼Œä½¿ç”¨ç®­å¤´å‡½æ•°è¿˜æ˜¯æ™®é€šçš„å‡½æ•°ï¼Œæ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚å› ä¸ºæ²¡æœ‰ `this` é—®é¢˜ã€‚æŠŠç®­å¤´å‡½æ•°æ¢æˆæ™®é€šå‡½æ•° `function handleClick()`æ²¡æœ‰ä»»ä½•é—®é¢˜ )

æˆ‘ä»¬æ€æ ·å®ç°åŒæ ·åŠŸèƒ½çš„ç±»ç»„ä»¶å‘¢ï¼Ÿå¾ˆç®€å•çš„ç¿»è¯‘ä¸€ä¸‹ï¼š

```javascript
class ProfilePage extends React.Component {
  showMessage = () => {
    alert('Followed ' + this.props.user);
  };

  handleClick = () => {
    setTimeout(this.showMessage, 3000);
  };

  render() {
    return <button onClick={this.handleClick}>Follow</button>;
  }
}
```

é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šè®¤ä¸ºä¸Šé¢ä¸¤ä¸ªç»„ä»¶å®ç°ï¼Œæ˜¯å®Œå…¨ç­‰ä»·çš„ã€‚å¼€å‘è€…ç»å¸¸åƒä¸Šé¢è¿™æ ·ï¼Œåœ¨å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶ä¹‹é—´é‡æ„ä»£ç ï¼Œå´æ²¡æœ‰æ„è¯†åˆ°ä»–ä»¬éšå«çš„å·®å¼‚ã€‚

![](./1.gif)



**ä½†æ˜¯ï¼Œä¸Šé¢ä¸¤ç§å®ç°ï¼Œå­˜åœ¨ç€å¾®å¦™çš„å·®å¼‚** ã€‚å†ä»”ç»†çœ‹ä¸€çœ‹ï¼Œä½ èƒ½çœ‹å‡ºå…¶ä¸­çš„å·®å¼‚ä¹ˆï¼Ÿè®²çœŸï¼Œè¿˜æ˜¯èŠ±äº†æˆ‘ä¸€æ®µæ—¶é—´ï¼Œæ‰çœ‹å‡ºå…¶ä¸­çš„å·®å¼‚ã€‚

**å¦‚æœä½ æƒ³åœ¨çº¿çœ‹çœ‹æºä»£ç ï¼Œä½ å¯ä»¥ [ç‚¹å‡»è¿™é‡Œ](https://codesandbox.io/s/pjqnl16lm7) **ã€‚ æœ¬æ–‡å‰©ä½™éƒ¨åˆ†ï¼Œéƒ½æ˜¯è®²è§£è¿™ä¸ªä¸åŒç‚¹ï¼Œä»¥åŠä¸ºä»€ä¹ˆä¸åŒç‚¹ä¼šå¾ˆé‡è¦ã€‚



åœ¨æˆ‘ä»¬ç»§ç»­å¾€ä¸‹ä¹‹å‰ï¼Œæˆ‘æƒ³å†æ¬¡è¯´æ˜ä¸‹ï¼Œæœ¬æ–‡æåˆ°çš„å·®å¼‚æ€§ï¼Œå’Œreact hooksæœ¬èº«å®Œå…¨æ²¡æœ‰å…³ç³»ï¼ä¸Šé¢ä¾‹å­é‡Œï¼Œæˆ‘éƒ½æ²¡ç”¨åˆ°hookså‘¢ã€‚

æœ¬æ–‡åªæ˜¯è®²è§£ï¼Œreactç”Ÿæ€é‡Œï¼Œå‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶çš„å·®å¼‚æ€§ã€‚å¦‚æœä½ æ‰“ç®—åœ¨reactå¼€å‘ä¸­ï¼Œå¤§è§„æ¨¡çš„ä½¿ç”¨å‡½æ•°ç»„ä»¶ï¼Œé‚£ä¹ˆä½ å¯èƒ½éœ€è¦äº†è§£è¿™ä¸ªå·®å¼‚ã€‚

**æˆ‘ä»¬å°†ä½¿ç”¨åœ¨reactæ—¥å¸¸å¼€å‘ä¸­ï¼Œç»å¸¸é‡åˆ°çš„ä¸€ä¸ªbugï¼Œæ¥å±•ç¤ºè¿™ä¸ªå·®å¼‚** ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥å¤ç°ä¸‹è¿™ä¸ªbugã€‚æ‰“å¼€ [è¿™ä¸ªåœ¨çº¿ä¾‹å­](https://codesandbox.io/s/pjqnl16lm7) ï¼Œé¡µé¢ä¸Šæœ‰ä¸€ä¸ªåå­—ä¸‹æ‹‰æ¡†ï¼Œä¸‹é¢æ˜¯ä¸¤ä¸ªå…³æ³¨ç»„ä»¶ï¼Œä¸€ä¸ªæ˜¯å‰æ–‡çš„å‡½æ•°ç»„ä»¶ï¼Œå¦ä¸€ä¸ªæ˜¯ç±»ç»„ä»¶ã€‚

å¯¹æ¯ä¸€ä¸ªå…³æ³¨æŒ‰é’®ï¼Œåˆ†åˆ«è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š

1. ç‚¹å‡»å…¶ä¸­1ä¸ªå…³æ³¨æŒ‰é’®
2. åœ¨3ç§’ä¹‹å†…ï¼Œé‡æ–°é€‰æ‹©ä¸‹æ‹‰æ¡†ä¸­çš„åå­—
3. 3ç§’ä¹‹åï¼Œæ³¨æ„çœ‹alertå¼¹çª—ä¸­çš„æ–‡å­—å·®å¼‚

ä½ åº”è¯¥æ³¨æ„åˆ°äº†ä¸¤æ¬¡alertå¼¹çª—çš„å·®åˆ«ï¼š

* åœ¨å‡½æ•°ç»„ä»¶çš„æµ‹è¯•æƒ…å†µä¸‹ï¼Œä¸‹æ‹‰æ¡†ä¸­é€‰ä¸­ `Dan`ï¼Œç‚¹å‡»å…³æ³¨æŒ‰é’®ï¼Œè¿…é€Ÿå°†ä¸‹æ‹‰æ¡†åˆ‡æ¢åˆ°`Sophie`ï¼Œ3ç§’ä¹‹åï¼Œalertå¼¹çª—å†…å®¹ä»ç„¶æ˜¯ `Followed Dan` 
* åœ¨ç±»ç»„ä»¶çš„æµ‹è¯•æƒ…å†µä¸‹ï¼Œé‡å¤ç›¸åŒçš„åŠ¨ä½œï¼Œ3ç§’ä¹‹åï¼Œalertå¼¹çª—å°†ä¼šæ˜¾ç¤º `Followed Sophie` 

![](./2.gif)



åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œä½¿ç”¨å‡½æ•°ç»„ä»¶çš„å®ç°æ˜¯æ­£ç¡®çš„ï¼Œç±»ç»„ä»¶çš„å®ç°æ˜æ˜¾æœ‰bugã€‚**å¦‚æœæˆ‘å…ˆå…³æ³¨äº†ä¸€ä¸ªäººï¼Œç„¶ååˆ‡æ¢åˆ°äº†å¦ä¸€ä¸ªäººçš„é¡µé¢ï¼Œå…³æ³¨æŒ‰é’®ä¸åº”è¯¥æ··æ·†æˆ‘å®é™…å…³æ³¨çš„æ˜¯å“ªä¸€ä¸ª** ã€‚

(PSï¼Œæˆ‘ä¹Ÿæ¨èä½ çœŸçš„å…³æ³¨ä¸‹ [Sophie](https://mobile.twitter.com/sophiebits)) 

é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬çš„ç±»ç»„ä»¶ï¼Œä¼šå­˜åœ¨é—®é¢˜å‘¢ï¼Ÿ

è®©æˆ‘ä»¬å†ä»”ç»†çœ‹çœ‹ç±»ç»„ä»¶çš„ `showMessage` å®ç°ï¼š

```javascript
class ProfilePage extends React.Component {
  showMessage = () => {
    alert('Followed ' + this.props.user);
  };
```

è¿™ä¸ªæ–¹æ³•ä¼šè¯»å– `this.props.user` ã€‚åœ¨Reactç”Ÿæ€é‡Œï¼Œ`props`æ˜¯ä¸å¯å˜æ•°æ®ï¼Œæ°¸è¿œä¸ä¼šæ”¹å˜ã€‚**ä½†æ˜¯ï¼Œ`this`å´å§‹ç»ˆæ˜¯å¯å˜çš„** ã€‚

ç¡®å®ï¼Œ`this`å­˜åœ¨çš„æ„ä¹‰ï¼Œå°±æ˜¯å¯å˜çš„ã€‚reactåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šä¿®æ”¹`this`ä¸Šçš„æ•°æ®ï¼Œä¿è¯ä½ èƒ½å¤Ÿåœ¨ `render`å’Œå…¶ä»–çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•é‡Œï¼Œè¯»å–åˆ°æœ€æ–°çš„æ•°æ®(props, state)ã€‚

å› æ­¤ï¼Œå¦‚æœåœ¨ç½‘ç»œè¯·æ±‚å¤„ç†è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬çš„ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œ`this.props`æ”¹å˜äº†ã€‚åœ¨è¿™ä¹‹åï¼Œ`showMessage`æ–¹æ³•ä¼šè¯»å–åˆ°æ”¹å˜ä¹‹åçš„ `this.props`ã€‚

è¿™æ­ç¤ºäº†ç”¨æˆ·ç•Œé¢æ¸²æŸ“çš„ä¸€ä¸ªæœ‰è¶£çš„äº‹å®ã€‚å¦‚æœæˆ‘ä»¬è®¤ä¸ºï¼Œç”¨æˆ·ç•Œé¢(UI)æ˜¯å¯¹å½“å‰åº”ç”¨çŠ¶æ€çš„ä¸€ä¸ªå¯è§†åŒ–è¡¨è¾¾(`UI=render(state)`)ï¼Œ**é‚£ä¹ˆäº‹ä»¶å¤„ç†å‡½æ•°ï¼ŒåŒæ ·å±äºrenderç»“æœçš„ä¸€éƒ¨åˆ†ï¼Œæ­£å¦‚ç”¨æˆ·ç•Œé¢ä¸€æ ·** ã€‚æˆ‘ä»¬çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œæ˜¯å±äºäº‹ä»¶è§¦å‘æ—¶çš„`render`ï¼Œä»¥åŠé‚£æ¬¡renderç›¸å…³è”çš„ `props` å’Œ`state`ã€‚

ç„¶è€Œï¼Œæˆ‘ä»¬åœ¨æŒ‰é’®ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°é‡Œï¼Œä½¿ç”¨å®šæ—¶å™¨(setTimeout)å»¶è¿Ÿè°ƒç”¨ `showMessage`ï¼Œæ‰“ç ´äº†`showMessage`å’Œ`this.props`çš„å…³è”ã€‚`showMessage`å›è°ƒä¸å†å’Œä»»ä½•çš„renderç»‘å®šï¼ŒåŒæ ·ä¸¢å¤±äº†æœ¬æ¥å…³è”çš„propsã€‚ä» `this` ä¸Šè¯»å–æ•°æ®ï¼Œåˆ‡æ–­äº†è¿™ç§å…³è”ã€‚

**å‡å¦‚å‡½æ•°ç»„ä»¶ä¸å­˜åœ¨**ï¼Œé‚£æˆ‘ä»¬æ€ä¹ˆæ¥è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ

æˆ‘ä»¬éœ€è¦é€šè¿‡æŸç§æ–¹å¼ï¼Œä¿®å¤`showMessage`å’Œå®ƒæ‰€å±çš„ `render`ä»¥åŠå¯¹åº”propsçš„å…³è”ã€‚

ä¸€ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æŒ‰é’®ç‚¹å‡»å¤„ç†å‡½æ•°ä¸­ï¼Œè¯»å–å½“å‰çš„ propsï¼Œç„¶åæ˜¾å¼çš„ä¼ ç»™ `showMessage`ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š

```javascript
class ProfilePage extends React.Component {
  showMessage = (user) => {
    alert('Followed ' + user);
  };

  handleClick = () => {
    const {user} = this.props;
    setTimeout(() => this.showMessage(user), 3000);
  };

  render() {
    return <button onClick={this.handleClick}>Follow</button>;
  }
}
```

è¿™ç§æ–¹å¼ [å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜](https://codesandbox.io/s/3q737pw8lq) ã€‚ç„¶è€Œï¼Œè¿™ä¸ªè§£å†³æ–¹å¼è®©æˆ‘ä»¬å¼•å…¥äº†å†—ä½™çš„ä»£ç ï¼Œéšç€æ—¶é—´æ¨ç§»ï¼Œå®¹æ˜“å¼•å…¥åˆ«çš„é—®é¢˜ã€‚å¦‚æœæˆ‘ä»¬çš„ `showMessage`æ–¹æ³•è¦è¯»å–æ›´å¤šçš„propså‘¢ï¼Ÿå¦‚æœ`showMessage`è¿˜è¦è®¿é—®stateå‘¢ï¼Ÿ**å¦‚æœ `showMessage` è°ƒç”¨äº†å…¶ä»–çš„æ–¹æ³•ï¼Œè€Œé‚£ä¸ªæ–¹æ³•è¯»å–äº†åˆ«çš„çŠ¶æ€ï¼Œæ¯”å¦‚`this.props.something` æˆ– `this.state.something` ï¼Œæˆ‘ä»¬ä¼šå†æ¬¡é¢ä¸´åŒæ ·çš„é—®é¢˜**ã€‚ æˆ‘ä»¬å¯èƒ½éœ€è¦åœ¨ `showMessage` é‡Œæ˜¾å¼çš„ä¼ é€’ `this.props` `this.state` ç»™å…¶ä»–è°ƒç”¨åˆ°çš„æ–¹æ³•ã€‚

è¿™æ ·åšï¼Œå¯èƒ½ä¼šç ´åç±»ç»„ä»¶å¸¦ç»™æˆ‘ä»¬çš„å¥½å¤„ã€‚è¿™ä¹Ÿå¾ˆéš¾åˆ¤æ–­ï¼Œä»€ä¹ˆæ—¶å€™éœ€è¦ä¼ é€’ï¼Œä»€ä¹ˆæ—¶å€™ä¸éœ€è¦ï¼Œè¿›ä¸€æ­¥å¢åŠ äº†å¼•å…¥bugçš„é£é™©ã€‚

åŒæ ·ï¼Œç®€å•åœ°æŠŠæ‰€æœ‰ä»£ç éƒ½æ”¾åœ¨ `onClick` å¤„ç†å‡½æ•°é‡Œï¼Œä¼šå¸¦ç»™æˆ‘ä»¬å…¶ä»–çš„é—®é¢˜ã€‚ä¸ºäº†ä»£ç å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§ç­‰åŸå› ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæŠŠå¤§çš„å‡½æ•°æ‹†åˆ†ä¸ºä¸€äº›ç‹¬ç«‹çš„å°çš„å‡½æ•°ã€‚**è¿™ä¸ªé—®é¢˜ä¸ä»…ä»…æ˜¯reactæ‰æœ‰ï¼Œæ‰€æœ‰åœ¨`this`ä¸Šç»´æŠ¤å¯å˜æ•°æ®çš„UIç±»åº“ï¼Œéƒ½å¾ˆå®¹æ˜“é‡åˆ°è¿™ä¸ªé—®é¢˜**ã€‚

æˆ–è®¸ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç±»çš„æ„é€ å‡½æ•°é‡Œç»‘å®šä¸€äº›æ–¹æ³•ï¼Ÿ

```javascript
class ProfilePage extends React.Component {
  constructor(props) {
    super(props);
    this.showMessage = this.showMessage.bind(this);
    this.handleClick = this.handleClick.bind(this);
  }

  showMessage() {
    alert('Followed ' + this.props.user);
  }

  handleClick() {
    setTimeout(this.showMessage, 3000);
  }

  render() {
    return <button onClick={this.handleClick}>Follow</button>;
  }
}
```

å¾ˆé—æ†¾ï¼Œä¸Šé¢çš„ä»£ç  **ä¸èƒ½** è§£å†³è¿™ä¸ªé—®é¢˜ï¼è®°ä½ï¼Œå¯¼è‡´è¿™ä¸ªé—®é¢˜çš„åŸå› ï¼Œæ˜¯æˆ‘ä»¬è¯»å– `this.props`çš„æ—¶æœºå¤ªæ™šäº†ï¼Œå’Œè¯­æ³•æ²¡æœ‰å…³ç³»ã€‚**ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬èƒ½å¤Ÿå®Œå…¨ä¾èµ–JavaScriptçš„é—­åŒ…æœºåˆ¶ï¼Œé‚£ä¹ˆå°±èƒ½å½»åº•è§£å†³è¿™ä¸ªé—®é¢˜** ã€‚

æˆ‘ä»¬å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¼šå°½é‡**é¿å…**ä½¿ç”¨é—­åŒ…ï¼Œå› ä¸ºåœ¨é—­åŒ…çš„æƒ…å†µä¸‹ï¼Œåˆ¤æ–­ä¸€ä¸ªå¯å˜çš„å˜é‡å€¼ï¼Œä¼šå˜å¾— [æœ‰äº›å›°éš¾](https://wsvincent.com/javascript-closure-settimeout-for-loop/) ã€‚ä½†æ˜¯ï¼Œåœ¨reacté‡Œï¼Œpropså’Œstateæ˜¯ **ä¸å¯å˜**çš„(ä¸¥æ ¼æ¥è¯´ï¼Œæˆ‘ä»¬å¼ºçƒˆæ¨èå°†propså’Œstateä½œä¸ºä¸å¯å˜æ•°æ®)ã€‚propså’Œstateçš„ä¸å¯å˜ç‰¹æ€§ï¼Œå®Œç¾è§£å†³äº†ä½¿ç”¨é—­åŒ…å¸¦æ¥çš„é—®é¢˜ã€‚

è¿™æ„å‘³ç€ï¼Œå¦‚æœåœ¨ `render`æ–¹æ³•é‡Œï¼Œé€šè¿‡é—­åŒ…æ¥è®¿é—®propså’Œstateï¼Œæˆ‘ä»¬å°±èƒ½ç¡®ä¿ï¼Œåœ¨`showMessage`æ‰§è¡Œæ—¶ï¼Œè®¿é—®åˆ°çš„propså’Œstateå°±æ˜¯renderæ‰§è¡Œæ—¶çš„é‚£ä»½æ•°æ®ï¼š

```javascript
class ProfilePage extends React.Component {
  render() {
    // Capture the props!
    const props = this.props;

    // Note: we are *inside render*.
    // These aren't class methods.
    const showMessage = () => {
      alert('Followed ' + props.user);
    };

    const handleClick = () => {
      setTimeout(showMessage, 3000);
    };

    return <button onClick={handleClick}>Follow</button>;
  }
}
```

**åœ¨renderæ‰§è¡Œæ—¶ï¼Œä½ æˆåŠŸçš„æ•è·äº†å½“æ—¶çš„props** ã€‚

![](./3.gif)

é€šè¿‡è¿™ç§æ–¹å¼ï¼Œrenderæ–¹æ³•é‡Œçš„ä»»ä½•ä»£ç ï¼Œéƒ½èƒ½è®¿é—®åˆ°renderæ‰§è¡Œæ—¶çš„propsï¼Œè€Œä¸æ˜¯åé¢è¢«ä¿®æ”¹è¿‡çš„å€¼ã€‚reactä¸ä¼šå†å·å·æŒªåŠ¨æˆ‘ä»¬çš„å¥¶é…ªäº†ã€‚

**åƒä¸Šé¢è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨renderæ–¹æ³•é‡Œï¼Œæ ¹æ®éœ€è¦æ·»åŠ ä»»ä½•å¸®åŠ©å‡½æ•°ï¼Œè¿™äº›å‡½æ•°éƒ½èƒ½å¤Ÿæ­£ç¡®çš„è®¿é—®åˆ°renderæ‰§è¡Œæ—¶çš„props**ã€‚é—­åŒ…ï¼Œè¿™ä¸€åˆ‡çš„æ•‘ä¸–ä¸»ã€‚



[ä¸Šé¢çš„ä»£ç ](https://codesandbox.io/s/oqxy9m7om5)ï¼ŒåŠŸèƒ½ä¸Šæ²¡é—®é¢˜ï¼Œä½†æ˜¯çœ‹èµ·æ¥æœ‰ç‚¹æ€ªã€‚å¦‚æœç»„ä»¶é€»è¾‘éƒ½ä½œä¸ºå‡½æ•°å®šä¹‰åœ¨renderå†…éƒ¨ï¼Œè€Œä¸æ˜¯ä½œä¸ºç±»çš„å®ä¾‹æ–¹æ³•ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦ç”¨ç±»å‘¢ï¼Ÿ

ç¡®å®ï¼Œæˆ‘ä»¬å‰¥ç¦»æ‰ç±»çš„å¤–è¡£ï¼Œå‰©ä¸‹çš„å°±æ˜¯ä¸€ä¸ªå‡½æ•°ç»„ä»¶ï¼š

```javascript
function ProfilePage(props) {
  const showMessage = () => {
    alert('Followed ' + props.user);
  };

  const handleClick = () => {
    setTimeout(showMessage, 3000);
  };

  return (
    <button onClick={handleClick}>Follow</button>
  );
}
```

è¿™ä¸ªå‡½æ•°ç»„ä»¶å’Œä¸Šé¢çš„ç±»ç»„ä»¶ä¸€æ ·ï¼Œå†…éƒ¨å‡½æ•°æ•è·äº†propsï¼Œreactä¼šæŠŠpropsä½œä¸ºå‡½æ•°å‚æ•°ä¼ è¿›å»ã€‚**å’Œthisä¸åŒçš„æ˜¯ï¼Œpropsæ˜¯ä¸å¯å˜çš„ï¼Œreactä¸ä¼šä¿®æ”¹props** ã€‚

å¦‚æœä½ åœ¨å‡½æ•°å‚æ•°é‡Œï¼ŒæŠŠpropsè§£æ„ï¼Œä»£ç çœ‹èµ·æ¥ä¼šæ›´åŠ æ¸…æ™°:

```javascript
function ProfilePage({ user }) {
  const showMessage = () => {
    alert('Followed ' + user);
  };

  const handleClick = () => {
    setTimeout(showMessage, 3000);
  };

  return (
    <button onClick={handleClick}>Follow</button>
  );
}
```

å½“çˆ¶ç»„ä»¶ä¼ å…¥**ä¸åŒ**çš„propsæ¥é‡æ–°æ¸²æŸ“ `ProfilePage`æ—¶ï¼Œreactä¼šå†æ¬¡è°ƒç”¨ `ProfilePage`ã€‚ä½†æ˜¯åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬ç‚¹å‡»å…³æ³¨æŒ‰é’®çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œå·²ç»æ•è·äº†ä¸Šä¸€æ¬¡renderæ—¶çš„propsã€‚

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆï¼Œåœ¨ [è¿™ä¸ªä¾‹å­](https://codesandbox.io/s/pjqnl16lm7) çš„å‡½æ•°ç»„ä»¶ä¸­ï¼Œæ²¡æœ‰é—®é¢˜ã€‚

![](./4.gif)

å¯ä»¥çœ‹åˆ°ï¼ŒåŠŸèƒ½å®Œå…¨æ˜¯æ­£ç¡®çš„ã€‚(å†æ¬¡PSï¼Œå»ºè®®ä½ ä¹Ÿå…³æ³¨ä¸‹ [Sunil](https://mobile.twitter.com/threepointone)) 

ç°åœ¨æˆ‘ä»¬ç†è§£äº†ï¼Œåœ¨å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶ä¹‹é—´çš„è¿™ä¸ªå·®å¼‚ï¼š



**å‡½æ•°ç»„ä»¶ä¼šæ•è·renderå†…éƒ¨çš„çŠ¶æ€** 



## å‡½æ•°ç»„ä»¶é…åˆReact Hooks



åœ¨æœ‰ `Hooks` çš„æƒ…å†µä¸‹ï¼Œå‡½æ•°ç»„ä»¶åŒæ ·ä¼šæ•è·renderå†…éƒ¨çš„ `state`ã€‚çœ‹ä¸‹è¿™ä¸ªä¾‹å­ï¼š

```javascript
function MessageThread() {
  const [message, setMessage] = useState('');

  const showMessage = () => {
    alert('You said: ' + message);
  };

  const handleSendClick = () => {
    setTimeout(showMessage, 3000);
  };

  const handleMessageChange = (e) => {
    setMessage(e.target.value);
  };

  return (
    <>
      <input value={message} onChange={handleMessageChange} />
      <button onClick={handleSendClick}>Send</button>
    </>
  );
}
```

(åœ¨çº¿demoï¼Œ[ç‚¹å‡»è¿™é‡Œ](https://codesandbox.io/s/93m5mz9w24)) 

å°½ç®¡è¿™æ˜¯ä¸€ä¸ªå¾ˆç®€é™‹çš„æ¶ˆæ¯å‘é€ç»„ä»¶ï¼Œå®ƒåŒæ ·å±•ç¤ºäº†å’Œå‰ä¸€ä¸ªä¾‹å­ç›¸åŒçš„é—®é¢˜ï¼šå¦‚æœæˆ‘ç‚¹å‡»äº†å‘é€æŒ‰é’®ï¼Œè¿™ä¸ªç»„ä»¶åº”è¯¥å‘é€çš„æ˜¯ï¼Œæˆ‘ç‚¹å‡»æŒ‰é’®é‚£ä¸€åˆ»è¾“å…¥çš„ä¿¡æ¯ã€‚



OKï¼Œæˆ‘ä»¬ç°åœ¨çŸ¥é“ï¼Œå‡½æ•°ç»„ä»¶ä¼šé»˜è®¤æ•è·propså’Œstateã€‚**ä½†æ˜¯ï¼Œå¦‚æœä½ æƒ³è¯»å–æœ€æ–°çš„propsã€stateå‘¢ï¼Œè€Œä¸æ˜¯æŸä¸€æ—¶åˆ»renderæ—¶æ•è·çš„æ•°æ®**ï¼Ÿ ç”šè‡³æˆ‘ä»¬æƒ³åœ¨ [å°†æ¥æŸä¸ªæ—¶åˆ»è¯»å–æ—§çš„propsã€state](https://dev.to/scastiel/react-hooks-get-the-current-state-back-to-the-future-3op2) å‘¢ï¼Ÿ

åœ¨ç±»ç»„ä»¶é‡Œï¼Œæˆ‘ä»¬åªéœ€è¦ç®€å•çš„è¯»å– `this.props` `this.state` å°±èƒ½è®¿é—®åˆ°æœ€æ–°çš„æ•°æ®ï¼Œå› ä¸ºreactä¼šä¿®æ”¹`this`ã€‚åœ¨å‡½æ•°ç»„ä»¶é‡Œï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥æ‹¥æœ‰ä¸€ä¸ª**å¯å˜æ•°æ®**ï¼Œå®ƒå¯ä»¥åœ¨æ¯æ¬¡renderé‡Œå…±äº«åŒä¸€ä»½æ•°æ®ã€‚è¿™å°±æ˜¯hooksé‡Œçš„ `useRef`ï¼š

```javascript
function MyComponent() {
  const ref = useRef(null);
  // You can read or write `ref.current`.
  // ...
}
```



ä½†æ˜¯ï¼Œä½ éœ€è¦è‡ªå·±ç»´æŠ¤ `ref` å¯¹åº”çš„å€¼ã€‚

å‡½æ•°ç»„ä»¶é‡Œçš„ `ref` å’Œç±»ç»„ä»¶ä¸­çš„**å®ä¾‹å±æ€§** æ‰®æ¼”äº†[ç›¸åŒçš„è§’è‰²](https://reactjs.org/docs/hooks-faq.html#is-there-something-like-instance-variables) ã€‚ä½ æˆ–è®¸å·²ç»ç†Ÿæ‚‰ `DOM refs`ï¼Œä½†æ˜¯hooksé‡Œçš„ `ref` æ›´åŠ é€šç”¨ã€‚hooksé‡Œçš„ `ref` åªæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œä½ å¯ä»¥å¾€å®¹å™¨é‡Œæ”¾ç½®ä»»ä½•ä½ æƒ³æ”¾çš„ä¸œä¸œã€‚

ç”šè‡³çœ‹èµ·æ¥ï¼Œç±»ç»„ä»¶é‡Œçš„ `this.something` ä¹Ÿå’Œhooksé‡Œçš„ `something.current` ç›¸ä¼¼ï¼Œä»–ä»¬ç¡®å®ä»£è¡¨äº†åŒä¸€ä¸ªæ¦‚å¿µã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œreactä¸ä¼šç»™å‡½æ•°ç»„ä»¶é‡Œçš„propsã€stateåˆ›é€ refsã€‚å¤§å¤šæ•°åœºæ™¯ä¸‹ï¼Œä½ ä¹Ÿä¸éœ€è¦è¿™æ ·åšï¼Œè¿™ä¹Ÿéœ€è¦é¢å¤–çš„å·¥ä½œæ¥ç»™refsèµ‹å€¼ã€‚å½“ç„¶äº†ï¼Œä½ å¯ä»¥æ‰‹åŠ¨çš„å®ç°ä»£ç æ¥è·Ÿè¸ªæœ€æ–°çš„stateï¼š

```javascript
function MessageThread() {
  const [message, setMessage] = useState('');
  const latestMessage = useRef('');

  const showMessage = () => {
    alert('You said: ' + latestMessage.current);
  };

  const handleSendClick = () => {
    setTimeout(showMessage, 3000);
  };

  const handleMessageChange = (e) => {
    setMessage(e.target.value);
    latestMessage.current = e.target.value;
  };
```

å¦‚æœæˆ‘ä»¬åœ¨ `showMessage`é‡Œè¯»å– `message`å­—æ®µï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¼šå¾—åˆ°æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œè¾“å…¥æ¡†çš„å€¼ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬è¯»å–çš„æ˜¯ `latestMessage.current`ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°è¾“å…¥æ¡†é‡Œæœ€æ–°çš„å€¼â€”â€”ç”šè‡³æˆ‘ä»¬åœ¨ç‚¹å‡»å‘é€æŒ‰é’®åï¼Œä¸æ–­çš„è¾“å…¥æ–°çš„å†…å®¹ã€‚

ä½ å¯ä»¥å¯¹æ¯” [è¿™ä¸¤ä¸ªdemo](https://codesandbox.io/s/ox200vw8k9) æ¥çœ‹çœ‹å…¶ä¸­çš„ä¸åŒã€‚

é€šå¸¸æ¥è®²ï¼Œä½ åº”è¯¥é¿å…åœ¨renderå‡½æ•°ä¸­ï¼Œè¯»å–æˆ–ä¿®æ”¹ refs ï¼Œå› ä¸º refs æ˜¯å¯å˜çš„ã€‚æˆ‘ä»¬å¸Œæœ›èƒ½ä¿è¯renderçš„ç»“æœå¯é¢„æµ‹ã€‚**ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦è·å–æŸä¸ªpropsæˆ–è€…stateçš„æœ€æ–°å€¼ï¼Œæ¯æ¬¡éƒ½æ‰‹åŠ¨æ›´æ–°refsçš„å€¼æ˜¾å¾—å¾ˆæ¯ç‡¥** ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨  `useEffect` è¿™ä¸ªhookï¼š

```javascript
function MessageThread() {
  const [message, setMessage] = useState('');

  // Keep track of the latest value.
  const latestMessage = useRef('');
  useEffect(() => {
    latestMessage.current = message;
  });

  const showMessage = () => {
    alert('You said: ' + latestMessage.current);
  };
```

(demo [åœ¨è¿™é‡Œ](https://codesandbox.io/s/yqmnz7xy8x)) 

æˆ‘ä»¬åœ¨ `useEffect` é‡Œå»æ›´æ–° ref çš„å€¼ï¼Œè¿™ä¿è¯åªæœ‰åœ¨DOMæ›´æ–°ä¹‹åï¼Œrefæ‰ä¼šè¢«æ›´æ–°ã€‚è¿™ç¡®ä¿æˆ‘ä»¬å¯¹ ref çš„ä¿®æ”¹ï¼Œä¸ä¼šç ´åreactä¸­çš„ä¸€äº›æ–°ç‰¹æ€§ï¼Œæ¯”å¦‚ [æ—¶é—´åˆ‡åˆ†å’Œä¸­æ–­](https://reactjs.org/blog/2018/03/01/sneak-peek-beyond-react-16.html) ï¼Œè¿™äº›ç‰¹æ€§éƒ½ä¾èµ– å¯è¢«ä¸­æ–­çš„renderã€‚

åƒä¸Šé¢è¿™æ ·ä½¿ç”¨ ref ä¸ä¼šå¤ªå¸¸è§ã€‚**å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦æ•è·propså’Œstate** ã€‚ä½†æ˜¯ï¼Œåœ¨å¤„ç†[å‘½ä»¤å¼API](https://overreacted.io/making-setinterval-declarative-with-react-hooks/)çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ ref ä¼šéå¸¸ç®€ä¾¿ï¼Œæ¯”å¦‚è®¾ç½®å®šæ—¶å™¨ï¼Œè®¢é˜…äº‹ä»¶ç­‰ã€‚è®°ä½ï¼Œä½ å¯ä»¥ä½¿ç”¨ ref æ¥è·Ÿè¸ªä»»ä½•å€¼â€”â€”ä¸€ä¸ªpropï¼Œä¸€ä¸ªstateï¼Œæ•´ä¸ªpropsï¼Œæˆ–è€…æ˜¯æŸä¸ªå‡½æ•°ã€‚

ä½¿ç”¨ ref åœ¨æŸäº›æ€§èƒ½ä¼˜åŒ–çš„åœºæ™¯ä¸‹ï¼ŒåŒæ ·é€‚ç”¨ã€‚æ¯”å¦‚åœ¨ä½¿ç”¨ `useCallback` æ—¶ã€‚ä½†æ˜¯ï¼Œ[ä½¿ç”¨useReducer](https://reactjs.org/docs/hooks-faq.html#how-to-avoid-passing-callbacks-down) åœ¨å¤§å¤šæ•°åœºæ™¯ä¸‹æ˜¯ä¸€ä¸ª [æ›´å¥½çš„è§£å†³æ–¹æ¡ˆ](https://github.com/ryardley/hooks-perf-issues/pull/3) ã€‚



## æ€»ç»“



åœ¨è¿™ç¯‡æ–‡ç« é‡Œï¼Œæˆ‘ä»¬å›é¡¾äº†ç±»ç»„ä»¶ä¸­å¸¸è§çš„ä¸€ä¸ªé—®é¢˜ï¼Œä»¥åŠæ€æ ·ä½¿ç”¨é—­åŒ…æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä½†æ˜¯ï¼Œä½ å¯èƒ½å·²ç»ç»å†è¿‡äº†ï¼Œå¦‚æœä½ å°è¯•é€šè¿‡æŒ‡å®šhooksçš„ä¾èµ–é¡¹ï¼Œæ¥ä¼˜åŒ–hooksçš„æ€§èƒ½ï¼Œé‚£ä¹ˆä½ å¾ˆå¯èƒ½ä¼šåœ¨hooksé‡Œï¼Œè®¿é—®åˆ°æ—§çš„propsæˆ–stateã€‚è¿™æ˜¯å¦æ„å‘³ç€é—­åŒ…ä¼šå¸¦æ¥é—®é¢˜å‘¢ï¼Ÿæˆ‘æƒ³ä¸æ˜¯çš„ã€‚

æ­£å¦‚æˆ‘ä»¬ä¸Šé¢çœ‹åˆ°çš„ï¼Œåœ¨ä¸€äº›ä¸æ˜“å¯Ÿè§‰çš„åœºæ™¯ä¸‹ï¼Œé—­åŒ…å¸®åŠ©æˆ‘ä»¬è§£å†³æ‰è¿™äº›å¾®å¦™çš„é—®é¢˜ã€‚ä¸ä»…å¦‚æ­¤ï¼Œé—­åŒ…ä¹Ÿè®©æˆ‘ä»¬åœ¨ [å¹¶è¡Œæ¨¡å¼](https://reactjs.org/blog/2018/03/01/sneak-peek-beyond-react-16.html) ä¸‹æ›´åŠ å®¹æ˜“å†™å‡ºæ²¡æœ‰bugçš„ä»£ç ã€‚å› ä¸ºé—­åŒ…æ•è·äº†æˆ‘ä»¬renderå‡½æ•°è¿è¡Œæ—¶çš„propså’Œstateï¼Œä½¿å¾—å¹¶è¡Œæ¨¡å¼æˆä¸ºå¯èƒ½ã€‚

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ç»å†çš„æ‰€æœ‰æƒ…å†µä¸‹ï¼Œè®¿é—®åˆ°æ—§çš„propsã€stateï¼Œé€šå¸¸æ˜¯ç”±äºæˆ‘ä»¬é”™è¯¯çš„è®¤ä¸º"å‡½æ•°ä¸ä¼šå˜"ï¼Œæˆ–è€…"propså§‹ç»ˆæ˜¯ä¸€æ ·çš„"ã€‚å®æ—¶ä¸Šä¸æ˜¯è¿™æ ·çš„ï¼Œæˆ‘å¸Œæœ›åœ¨æœ¬æ–‡é‡Œï¼Œèƒ½å¤Ÿå¸®åŠ©ä½ äº†è§£åˆ°è¿™ä¸€ç‚¹ã€‚

åœ¨æˆ‘ä»¬ä½¿ç”¨å‡½æ•°æ¥å¼€å‘å¤§éƒ¨åˆ†reactç»„ä»¶æ—¶ï¼Œéœ€è¦æ›´æ­£æˆ‘ä»¬å¯¹äº [ä»£ç ä¼˜åŒ–](https://github.com/ryardley/hooks-perf-issues/pull/3) å’Œ [å“ªäº›çŠ¶æ€ä¼šæ”¹å˜](https://github.com/facebook/react/issues/14920) çš„è®¤çŸ¥ã€‚

æ­£å¦‚ [Fredrikè¯´çš„](https://mobile.twitter.com/EphemeralCircle/status/1099095063223812096): 

> åœ¨ä½¿ç”¨react hooksè¿‡ç¨‹ä¸­ï¼Œæˆ‘å­¦ä¹ åˆ°çš„æœ€é‡è¦è§„åˆ™å°±æ˜¯ï¼Œ"ä»»ä½•å˜é‡ï¼Œéƒ½å¯ä»¥åœ¨ä»»ä½•æ—¶é—´è¢«æ”¹å˜"

å‡½æ•°åŒæ ·éµå®ˆè¿™æ¡è§„åˆ™ã€‚

**reactå‡½æ•°å§‹ç»ˆä¼šæ•è·propsã€state**ï¼Œæœ€åå†å¼ºè°ƒä¸€ä¸‹ã€‚



**è¯‘æ³¨**ï¼š æœ‰äº›åœ°æ–¹ä¸æ˜ç™½æ€ä¹ˆç¿»è¯‘ï¼Œæœ‰åˆ å‡ï¼Œå»ºè®®é˜…è¯»åŸæ–‡ï¼



â€‹     â€”â€”â€”æ—¶2019å¹´4æœˆ17æ—¥ 18:47 ç«£å·¥äºå¸éƒ½äº”é“å£æ¸…åç§‘æŠ€å›­